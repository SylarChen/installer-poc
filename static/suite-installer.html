<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="css/installer.css">
    <link rel="stylesheet" href="css/hpe-font.css"/>
    <!--<script src="js/react.js"></script>
    <script src="js/react-dom.js"></script>
    <script src="js/browser.min.js"></script>-->
    <script src="js/jquery.min.js"></script>
    <!--   <script src="js/remarkable.min.js"></script>-->
    <style>
        body, html {
            width: 100%;
            height: 100%;
            min-width: 1000px;
            min-height: 600px;
            margin: 0px;
        }

        * {
            font-family: HPEMetricRegular;
        }

        .s-btn {
            border: 1px solid #01A982;
            width: 150px;
            height: 39px;
            background-color: white;
            outline: none;
            margin-right: 20px;
            margin-bottom: 10px;
            color: #01a982;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>

<body id="body">
<div id="center">
    <div id="nav">
        <div id="nav-title">
            <img id="nav-logo" src="img/hpe_logo.svg.png"/>
            <!--<img id="nav_band" src="hpe_logo.svg.png">-->
        </div>
        <div id="nav-hr"></div>

        <ul style="padding: 0px">
            <li class="menu-li">Intro</li>
            <li class="menu-li">Suite selection</li>
            <li class="menu-li">Summary</li>
        </ul>
    </div>


    <div id="section">
        <div id="section_main" align="center">
        </div>
        <div id="section_exp">

        </div>
    </div>


</div>

<div id="footer">
    <button id="next_btn" style="margin-top:20px;margin-right: 30px;" class="footer-button">Next &gt;</button>
    <button id="back_btn" style="margin-top:20px;margin-right: 30px;" class="footer-button">&lt; Back</button>
    <!--<button id="back_button" class="footer-button">< Back</button>-->
</div>
<script type="text/javascript">
    var initStep = "Intro";
    var iframeUrl = "";
    var loadInfro = function () {
        $("#section_main").children().remove();
        $("#section_main").append("<div style='width:90%;text-align:left'>"
                + "<h1>Welcome to the HPE Software Suite Installer</h1>"
                + "<p>"
                + "Quickly and effortlessly install integrated HPE Software suites."
                + "</p>"
                + "<p>"
                + "Select, configure and deploy market-leading HPE Software suites."
                + "</p>"
                + "<p>"
                + "This installer and the HPE Software suite management portal automate deployment, scaling, and management of containerized HPE Software suites."
                + "</p>"
                + "<p>"
                + "Please review the hard- and software requirements before proceeding with the installation."
                + "</p>"
                + "</div>");
    }
    var loadChooseSuite = function () {
        $("#section_main").children().remove();
        $("#section_main").append(
                "<div style='width:90%;text-align:left'>"
                + "<h1 style='color: #01A982;'>Select Suite</h1><h3>Select the suite you want to install</h3>"
                + "<div class='suiteDiv'><button class='s-btn'>ITSMA</button>"
                + "</div>");
        $('.s-btn').click(function () {
            $(this).css({
                'background-color': '#01a982',
                'color':'white'
            }).attr('suiteSelected', true)
        });
    };


    loadInfro();
    $("#next_btn").click(function () {
        console.log(initStep == "Intro");
        if (initStep == "Intro") {
            console.log("next");
            initStep = "ChooseSuite";
            loadChooseSuite();
        } else if (initStep == "ChooseSuite") {
            requestIframeUrl(function (url) {
                initStep = "Capabilities";
                $("#section_main").children().remove();

                var iframeTpl = '<iframe id="mainFrame" name="mainFrame" width="100%" height="100%"  ' +
                        'frameborder="0" style="display: block; height: 987px;" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>';

                iframeUrl = 'loading.html';
                $(iframeTpl).appendTo("#section_main").prop('src', iframeUrl);

                iframeStyle();

                setTimeout(function () {
                    iframeUrl = window.document.location.origin + url;
					$("#mainFrame").prop('src', iframeUrl);
                }, 15*1000);
            });
        } else if (initStep == "Capabilities") {
            $("#mainFrame").prop('src', iframeUrl);
        }

    });
    $("#back_btn").click(function () {
        console.log(initStep);
        if (initStep == "ChooseSuite") {
            initStep = "Intro";
            loadInfro();
        } else if (initStep == "Capabilities") {
            initStep = "ChooseSuite";
            loadChooseSuite();
        }
        defaultStyle();
    });
    window.onload = function () {
        resizeComponent();
    }
    window.onresize = function () {
        resizeComponent();
    }
    function resizeComponent() {
        $("#section").width($(body).width() - 400);
    }


    function requestIframeUrl(cb) {
        $.ajax({
            url: '/suiteinstaller/createPod',
            type: 'get',
            success: function (data) {
                cb('/suiteConfig/configuration.html');
            },
            error: function (res) {
                alert('ERROR:' + res.statusText);
            }
        });
    }
    
    function iframeStyle() {
        $('#section').css('padding-top', '0');
        $("#section_main").css('width', '100%');
        $("#next_btn").text('Refresh');
    }
    
    function defaultStyle() {
        $('#section').css('padding-top', '190px');
        $("#section_main").css('width', '60%');
        $("#next_btn").text('Next >');
    }
</script>

</body>

</html>